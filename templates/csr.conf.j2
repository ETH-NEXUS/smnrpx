[ req ]
default_bits = 2048
default_md = sha256
req_extensions = req_ext
x509_extensions = v3_req
distinguished_name = dn
prompt = no

[ dn ]
C = XX
ST = N/A
L = N/A
O = Self-signed certificate
CN = {{ domain_name }}

[ req_ext ]
subjectAltName = @alt_names

[ v3_req ]
subjectAltName = @alt_names

[ alt_names ]
{% if domain.sans %}
{% set dns_cnt = 1 %}
{% for san in domain.sans %}
DNS.{{ dns_cnt }} = {{ san }}
{% set dns_cnt = dns_cnt + 1%}
{% endfor %}
{% endif %}